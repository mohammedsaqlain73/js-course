<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style></style>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
    <div class="container">
      <h1>Welcome to Dad Jokes!</h1>
      <section class="api_body"></section>
      <button id="fetchJoke">Get Another Joke</button>
    </div>

    <script>

        /* =================================api fetch to make http request===============================
        fetch (url ,{ //fetch is a promise
           header : { //it is basic here we can pass body also many more
           Accept : "application/Json", // it is in Json format
           },
        })
        .then((response) => response.Json()) ====fetch () gives respond with json format data we neeed to prase here doinh
        .then((data) => console.log(data))       it using literal.Json()

        */

      const apiBody = document.querySelector(".api_body");
      const apiUrl = "https://icanhazdadjoke.com/";



//================================  starting learning with simple apis(read this first ) ====================================================

//const apiUrl = "https://jsonplaceholder.typicode.com/posts/1";
   /*  const fetchData = () => {
        const response = fetch(apiUrl ,{
        header : {
          Accept :application/Json
        }
        })  //fetch is a promise then can be used
        .then((op) => {
          console.log(op);//this will give data in form of Json we need to parse it to normal here we will use literal.Json()
        })
        .catch((err) =>{
          console.log(err)
        })
      };
/*=================================================== o/p  =============================================================
Response {type: 'cors', url: 'https://jsonplaceholder.typicode.com/posts/1', redirected: false, status: 200, ok: true, â€¦}
body:ReadableStream
bodyUsed:false
headers:Headers {}
ok:true
redirected:false
status:200
statusText:""
type:"cors"
url:"https://jsonplaceholder.typicode.com/posts/1"

//-----------------------------------------------------------------------------------------------------------------------
const fetchData = () => {
        const response = fetch(apiUrl)  //fetch is a promise then can be used
        .then((op) => {
          console.log(op);//this will give data in form of Json we need to parse it to normal here we will use literal.Json()
          return op.json();
        }).then((result) => {
          console.log(result) //we saw this result's title has actual data i.e joke
          console.log(result.title)//actual joke
        })
        .catch((err) =>{
          console.log(err)
        })
      };
============================================================================================================================*/
const fetchData = () =>{
  fetch(apiUrl ,{
    headers : {
      Accept: "application/Json",
    },
  })
  .then((op) => {
    //console.log(op)  we saw that fetch gives data in Json format need to parrse it.
    return op.json(); //parse to normal  {id: 'KBsrz5ws4Ed', joke: 'Why are fish easy to weigh? Because they have their own scales.', status: 200}
  })
  .then((result) => {
   console.log(result.joke);//Why are fish easy to weigh? Because they have their own scales.
   //now append this data to apibody
   apiBody.innerHTML=result.joke;
  })

  };


//i want that when someone open this app by defauylt one joke should be there for it run fetch
fetchData();

      // Add event listener to fetch a new joke when the button is clicked
      document.getElementById("fetchJoke").addEventListener("click", fetchData);
    </script>
  </body>
</html>
